# language: ru
Функция: Различные реализации хранилища
  Как разработчик
  Я хочу протестировать различные реализации хранилища
  Чтобы убедиться что все они работают одинаково

  Структура сценария: Базовые операции для разных типов хранилища
    Дано я использую хранилище типа "<типХранилища>"
    И хранилище очищено
    Когда я добавляю резюме "Тест Пользователь 1"
    И я добавляю резюме "Тест Пользователь 2"
    И я добавляю резюме "Тест Пользователь 3"
    Тогда размер хранилища должен быть 3
    Когда я удаляю первое резюме
    Тогда размер хранилища должен быть 2
    Когда я очищаю хранилище
    Тогда размер хранилища должен быть 0

    Примеры:
      | типХранилища |
      | ARRAY        |
      | MAP          |

  Сценарий: Проверка ограничений ArrayStorage
    Дано я использую хранилище типа "ARRAY"
    И хранилище очищено
    Когда я пытаюсь добавить 100 резюме
    Тогда все резюме должны быть успешно добавлены
    И размер хранилища должен быть 100

  Сценарий: Сортировка в MapStorage
    Дано я использую хранилище типа "MAP"
    И хранилище очищено
    Когда я добавляю резюме в случайном порядке:
      | name           |
      | Яков Яковлев   |
      | Анна Антонова  |
      | Михаил Михайлов|
      | Борис Борисов  |
    Тогда при получении всех резюме они должны быть отсортированы

  Сценарий: Производительность разных хранилищ
    Дано я использую хранилище типа "ARRAY"
    Когда я добавляю 50 резюме
    И я измеряю время поиска резюме
    Тогда время поиска должно быть менее 100 миллисекунд
    Дано я использую хранилище типа "MAP"
    Когда я добавляю 50 резюме
    И я измеряю время поиска резюме
    Тогда время поиска должно быть менее 10 миллисекунд

  Сценарий: Проверка транзакционности операций
    Дано я использую хранилище типа "MAP"
    И в хранилище есть 5 резюме
    Когда я начинаю массовое обновление всех резюме
    И обновление прерывается на 3-м резюме
    Тогда первые 2 резюме должны быть обновлены
    И последние 2 резюме должны остаться без изменений