# language: ru
Функция: Веб-функциональность приложения резюме
  Как веб-пользователь
  Я хочу управлять резюме через веб-интерфейс
  Чтобы иметь удобный доступ к функциональности из браузера

  Предыстория:
    Дано веб-сервер запущен на порту 8080
    И база данных доступна
    И пользователь авторизован

  Сценарий: Просмотр списка резюме
    Когда я открываю страницу "/resumes"
    Тогда я вижу таблицу со списком резюме
    И таблица содержит колонки:
      | Имя | Местоположение | Email | Телефон | Действия |
    И есть кнопка "Создать новое резюме"
    И есть поле поиска
    И есть пагинация если резюме больше 10

  Сценарий: Создание нового резюме через форму
    Дано я на странице "/resumes/new"
    Когда я заполняю форму:
      | поле            | значение                    |
      | Полное имя      | Петр Петров                 |
      | Местоположение  | Санкт-Петербург             |
      | Email           | petr.petrov@example.com     |
      | Телефон         | +7-921-123-4567             |
      | Цель            | Получить работу разработчика|
    И нажимаю кнопку "Сохранить"
    Тогда резюме должно быть создано
    И я должен быть перенаправлен на страницу резюме
    И должно появиться сообщение "Резюме успешно создано"

  Сценарий: Редактирование существующего резюме
    Дано существует резюме с ID "12345"
    Когда я открываю страницу "/resumes/12345/edit"
    Тогда форма должна быть заполнена текущими данными
    Когда я изменяю поле "Местоположение" на "Москва"
    И нажимаю "Обновить"
    Тогда изменения должны быть сохранены
    И должна быть запись в истории изменений

  Сценарий: Удаление резюме с подтверждением
    Дано я на странице резюме "/resumes/12345"
    Когда я нажимаю кнопку "Удалить"
    Тогда должно появиться модальное окно подтверждения
    Когда я подтверждаю удаление
    Тогда резюме должно быть удалено
    И я должен быть перенаправлен на список резюме
    И должно появиться сообщение "Резюме удалено"

  Сценарий: Поиск и фильтрация резюме
    Дано в системе есть 50 резюме
    Когда я ввожу в поиск "Java Developer"
    Тогда должны отображаться только резюме содержащие "Java Developer"
    Когда я применяю фильтры:
      | фильтр          | значение    |
      | Город           | Москва      |
      | Опыт            | 3-5 лет     |
      | Зарплата        | 150-200к    |
    Тогда результаты должны соответствовать всем фильтрам

  Сценарий: Экспорт резюме в PDF
    Дано я на странице резюме "/resumes/12345"
    Когда я нажимаю "Экспорт в PDF"
    Тогда должен начаться загрузка PDF файла
    И PDF должен содержать:
      | Все контактные данные |
      | Все секции резюме     |
      | Форматирование        |
      | Логотип компании      |

  Сценарий: AJAX обновление секций
    Дано я редактирую резюме
    Когда я добавляю новое достижение через AJAX
    Тогда достижение должно появиться без перезагрузки страницы
    И должна быть анимация добавления
    И кнопка "Сохранить" должна стать активной

  Сценарий: Валидация форм на клиенте
    Дано я на странице создания резюме
    Когда я пытаюсь отправить пустую форму
    Тогда должны появиться ошибки валидации:
      | поле       | ошибка                         |
      | Имя        | Обязательное поле              |
      | Email      | Обязательное поле              |
    Когда я ввожу невалидный email "not-an-email"
    Тогда должна появиться ошибка "Некорректный формат email"

  Сценарий: Автосохранение черновика
    Дано я редактирую резюме
    Когда я вношу изменения в поля
    И жду 30 секунд
    Тогда изменения должны быть автоматически сохранены как черновик
    И должен появиться индикатор "Автосохранено"
    Когда я обновляю страницу
    Тогда мои изменения должны быть восстановлены

  Сценарий: Массовые операции
    Дано я на странице списка резюме
    Когда я выбираю 5 резюме через чекбоксы
    Тогда должна появиться панель массовых действий
    Когда я выбираю "Экспортировать выбранные"
    Тогда должен загрузиться ZIP архив с 5 резюме

  Структура сценария: Проверка прав доступа
    Дано я авторизован как "<роль>"
    Когда я пытаюсь "<действие>"
    Тогда результат должен быть "<результат>"

    Примеры:
      | роль          | действие              | результат        |
      | admin         | удалить любое резюме  | успех            |
      | user          | удалить свое резюме   | успех            |
      | user          | удалить чужое резюме  | отказ в доступе  |
      | guest         | создать резюме        | требуется вход   |

  Сценарий: REST API эндпоинты
    Когда я отправляю GET запрос на "/api/resumes"
    Тогда ответ должен быть JSON массив резюме
    И код ответа должен быть 200
    Когда я отправляю POST запрос на "/api/resumes" с данными резюме
    Тогда резюме должно быть создано
    И код ответа должен быть 201
    И должен вернуться созданный объект с ID

  Сценарий: WebSocket уведомления
    Дано я подключен к WebSocket "/ws/notifications"
    Когда другой пользователь комментирует мое резюме
    Тогда я должен получить real-time уведомление
    И должен появиться всплывающий тост
    И счетчик уведомлений должен увеличиться

  Сценарий: Мобильная адаптивность
    Когда я открываю сайт на мобильном устройстве
    Тогда должна загрузиться мобильная версия
    И меню должно быть в виде гамбургера
    И таблицы должны быть адаптированы для мобильных
    И все функции должны быть доступны